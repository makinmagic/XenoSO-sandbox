<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="https://blogimages6.wordpress.com/wp-content/uploads/2024/10/snd.png" type="image/png"> <!-- Favicon -->
    <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
    <title>XenoSO Dashboard</title>
    <link rel="stylesheet" href="https://site-assets.fontawesome.com/releases/v6.6.0/css/all.css">
    <link rel="stylesheet" href="https://site-assets.fontawesome.com/releases/v6.6.0/css/sharp-solid.css">
    <script src="https://makinmagic.github.io/XenoSO/functions/functions.js"></script>
    <!-- <script src="https://makinmagic.github.io/XenoSO/functions/functions-nye.js"></script> -->
    <link rel="stylesheet" href="https://makinmagic.github.io/XenoSO/styles/style.css">
</head>
<body>
   <!-- Stars background - used with permission from Sorta -->
  <div class="stars" id="stars"></div>
    <div id="dark-mode-toggle" style="position: absolute; top: 20px; right: 20px; cursor: pointer;">
    <i id="darkModeIcon" class="fa-solid fa-moon"></i>
    </div>
    <h1>
    <i class="fa-solid fa-rhombus"></i> XenoSO Dashboard <i class="fa-solid fa-rhombus"></i>
</h1>
    <!-- <div id="guideLink" style="text-align: center; font-weight: bold;">
    <a href="https://XenoSOguide.com/" target="_blank" title="XenoSO Guide">
        <i class="fa-solid fa-circle-question"></i> Game Guide <i class="fa-solid fa-circle-question"></i>
    </a>
</div> -->
    <div id="tempoSim" style="font-weight: bold;">Time in Xenovia: Loading time...</div>
	<!-- <div id="money-object" style="font-weight: bold;">Loading today's money object...</div> -->
   <!-- <div id="countdown" style="text-align: center; font-weight: bold;">Time left in Icetopia and the Witches NPCs: <span id="time"></span></div> -->
    <div id="currentEvent" style="text-align: center; font-weight: bold;"></div>
    <div id="main-container">
<div class="container">
            <div style="display: flex; align-items: center;">
    <h3 id="players-title" style="flex-grow: 1; text-align: center;"><span class="sims-online-icon"></span> Sims Online: 0 <span class="sims-online-icon"></span></h3>
    <i class="fa-solid fa-search search-icon" onclick="toggleSearch('sim')" style="margin-left: 10px;"></i>
    <input type="text" id="sim-search" placeholder="Search any Sim" autocomplete="off" style="display: none; margin-left: 10px;" onkeyup="searchSim(event)">
</div>
            <div class="scrollable" id="players"></div>
        </div>
        <div class="container">
            <div style="display: flex; align-items: center;">
    <h3 id="lots-title" style="flex-grow: 1; text-align: center;"><span class="active-lots-icon"></span> Active Lots <span class="active-lots-icon"></span></h3>
    <i class="fa-solid fa-search search-icon" onclick="toggleSearch('lot')"></i>
    <input type="text" id="lot-search" placeholder="Search any Lot" autocomplete="off" style="display:none; margin-left: 10px;" onkeyup="searchLot(event)">
</div>
            <div id="lot-filter">
    <i class="fa-solid fa-mug-hot" title="Service" onclick="filterLots('Service')"></i>
    <i class="fa-solid fa-hammer" title="Skills" onclick="filterLots('Skills')"></i>
    <i class="fa-solid fa-dollar-sign" title="Money" onclick="filterLots('Money')"></i>
    <i class="fa-solid fa-handshake" title="Welcome" onclick="filterLots('Welcome')"></i>
    <i class="fa-solid fa-masks-theater" title="Entertainment" onclick="filterLots('Entertainment')"></i>
    <i class="fa-solid fa-gift" title="Store" onclick="filterLots('Store')"></i>
    <i class="fa-solid fa-heart" title="Romance" onclick="filterLots('Romance')"></i>
    <i class="fa-solid fa-house-chimney" title="Residential" onclick="filterLots('Residential')"></i>
    <i class="fa-solid fa-dice-three" title="Games" onclick="filterLots('Games')"></i>
    <i class="fa-solid fa-building" title="Community" onclick="filterLots('Community')"></i>
    <i class="fa-solid fa-arrow-rotate-left" title="Show All" onclick="filterLots('')"></i>
            </div>
            <div class="scrollable" id="lots"></div>
        </div>
    </div>

    <div id="bottom-container" style="display: flex; justify-content: space-between; gap: 1%;">
    <div id="events-container" class="container">
    <h3 style="margin-bottom: 10px; margin-top: 20px;"><span class="upcoming-events-icon"></span> Upcoming Events <span class="upcoming-events-icon"></span></h3>
    <div style="text-align: center; margin-top: 5px; margin-bottom: 10px;">
            <a href="https://forms.gle/zA2QuMdGtR7Rwcfp7" target="_blank" style="text-decoration: underline; font-weight: bold;">
                Click here to add your event!
            </a>
        </div>
        <div class="scrollable">
        <table id="events-table">
            <thead>
                <tr>
                    <th>Date</th>
                    <th>Event Name</th>
                    <th>Location</th>
                </tr>
            </thead>
            <tbody>
                <!-- Events will be populated dynamically -->
            </tbody>
        </table>
                </div>
    </div>
    <div id="console-container" class="container">
        <h3><span class="console-icon"></span> Console <span class="console-icon"></span></h3>
        <div id="console-content">
            <p style="text-align: center; color: #black;">Select or search for a Sim or Lot to see more information, or click on an Event to view details.</p>
            <!-- Content for Console will go here -->
        </div>
    </div>
</div>
<div id="footer-note" style="text-align: center; margin-bottom: 0px; font-size: 16px;">
        <i class="fa-regular fa-star"></i> Click on the star next to a Sim or a Lot to favourite them. This will make them show up at the top of the list when they're online!<br><br>
	<i class="fa-regular fa-search"></i> You can search for any Sim or Lot, whether they are online or not!<br><br>
	Made with ❤️ for XenoSO by Mr Teddy
    </div>
	
<script>
// Initialize the dashboard and set up periodic checks
async function init() {
    // createSnowflakes();
    // launchFireworks();
    tempoSim(); // Start simulation timing
    // fetchMoneyObject(); // Display the money object
    generateStars(); // Starry background - used with permission from Sorta
    // updateCountdown();
    await loadOnlinePlayers(); // Load online players
    await loadLots(); // Load active lots
    fetchEvents(); // Load and display upcoming events
    displayCurrentEvent(); // Initial check for any ongoing event and add balloon icon
}

window.onload = () => {
    init();
    setInterval(displayCurrentEvent, 60000); // Update "Current Event" status every minute
};
</script>	
</body>
</html>
